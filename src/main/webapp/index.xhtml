<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        template="template.xhtml">
  <ui:param name="pageTitle" value="Cleanlungs"/>
  <ui:define name="content">
    <p:growl id="growl" globalOnly="true"/>
    <h:form>
      <h:panelGrid columns="3">
        <p:outputLabel for="registeredAfter" value="Registered After:"/>
        <p:calendar id="registeredAfter" value="#{searchForm.registeredAfter}"
                    pattern="dd/MM/yyyy" navigator="true"
                    converterMessage="Please enter a valid date. For example 15/4/2015.">
          <f:convertDateTime pattern="dd/MM/yyyy"/>
          <p:ajax event="dateSelect" listener="#{personDatatable.refresh}" update=":frmPersons @form"/>
        </p:calendar>
        <p:message for="registeredAfter"/>
        <p:button value="New ..." outcome="person"/>
      </h:panelGrid>
    </h:form>
    <h:form id="frmPersons">
      <p:dataTable value="#{personDatatable.values}" var="per" styleClass="person-table"
                   rows="10" paginator="true">
        <p:column sortBy="#{per.personNo}">
          <f:facet name="header">Person No</f:facet>
          <h:link value="#{per.personNo}" outcome="person">
            <f:param name="perid" value="#{per.personNo}"/>
          </h:link>
        </p:column>
        <p:column sortBy="#{per.firstName}">
          <f:facet name="header">First Name</f:facet>
          #{per.firstName}
        </p:column>
        <p:column sortBy="#{per.lastName}">
          <f:facet name="header">Last Name</f:facet>
          #{per.lastName}
        </p:column>
        <p:column sortBy="#{per.street}">
          <f:facet name="header">Street</f:facet>
          <h:outputText value="#{per.street}">
          </h:outputText>
        </p:column>
        <p:column sortBy="#{per.buildingNumber}">
          <f:facet name="header">Building Number</f:facet>
          <h:outputText value="#{per.buildingNumber}">
          </h:outputText>
        </p:column>
        <p:column sortBy="#{per.email}">
          <f:facet name="header">Email</f:facet>
          <h:outputText value="#{per.email}">
          </h:outputText>
        </p:column>
        <p:column sortBy="#{per.phoneNumber}">
          <f:facet name="header">Phone</f:facet>
          <h:outputText value="#{per.phoneNumber}">
          </h:outputText>
        </p:column>
        <p:column sortBy="#{per.pesel}">
          <f:facet name="header">Pesel</f:facet>
          <h:outputText value="#{per.pesel}">
          </h:outputText>
        </p:column>
        <p:column sortBy="#{per.registrationDate}">
          <f:facet name="header">Registered</f:facet>
          <h:outputText value="#{per.registrationDate}">
            <f:convertDateTime pattern="dd/MM/yyyy"/>
          </h:outputText>
        </p:column>
        <p:column width="80" style="text-align: center">
          <p:commandButton action="#{personController.remove(per)}" icon="ui-icon-trash"
                           update="@form growl"
                           style="width: 24px; height: 24px"/>
        </p:column>
      </p:dataTable>
    </h:form>
  </ui:define>
</ui:composition>